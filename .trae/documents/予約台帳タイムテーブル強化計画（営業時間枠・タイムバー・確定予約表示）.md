## 目的
予約台帳のタイムテーブルを営業時間の枠（スロット間隔）に合わせ、現在時刻のタイムバーを追加。さらに「確定済み予約」をタイムテーブル内に明確に表示して、運用の把握と編集を効率化します。

## 要件整理
- 営業時間の枠に沿ったグリッド表示（例: 15分単位）
- 現在時刻タイムバー（自動更新）
- タイムテーブルに「確定済み予約」を表示（色分け・明確なラベル）
- 既存フィルタ（スタッフ/サービス/ステータス/支払い）と連動

## 仕様
- 枠（グリッド）
  - 基本間隔: `default_slot_interval_min`（サイト設定）。存在すればその値、無ければ 15 分
  - 表示範囲: 曜日別営業時間（`opening_hours`）の `open_at`〜`close_at`。休業日は全面「休業」
  - 非営業時間帯はクリック不可・灰色背景
- タイムバー
  - 当日タイムテーブル内に赤線で表示。`setInterval(60s)`で位置更新
  - バー上に現在時刻ラベル（例: 17:30）
- 確定予約の表示
  - `status === "confirmed"`（必要に応じて `paid` も含めるオプション）を強調色で表示
  - 予約ブロック: サービス名、時間、顧客名を表示。担当スタッフ列に配置（担当未設定は「担当なし」列）
  - フィルタ「ステータス=確定」を適用時は確定のみ、未適用時は色分けで表示

## 技術変更
- データ取得
  - サイト設定: `getSiteSettings()`（`default_slot_interval_min`）
  - 営業時間: `getOpeningHours()`（曜日別）、必要に応じて `getDateOverrides()`（臨時）
  - 当日予約: 予約ダッシュボード既存の当日取得を流用（必要なら日付セレクタ追加）
- UI更新
  - `src/components/admin/reservation-timetable.tsx` に枠間隔（スナップ）とタイムバーを追加
  - 枠クリックによる作成は営業時間内のみ許可。スナップは設定に従う
  - 予約ブロックは確定状態を強調色で描画、他ステータスは現行色分けのまま

## 実装ステップ
1. サイト設定の読込と枠間隔をタイムテーブルに渡す（Propsに `slotIntervalMin` 追加）
2. 営業時間の枠に合わせ、グリッド線を枠間隔で描画（従来の1時間線に加えて 15分 等）
3. 現在時刻タイムバーの追加（当日表示時のみ）。60秒間隔で再計算
4. 予約の表示ロジックに「確定」を強調（色・ラベル）。担当列マッピングを厳密化
5. クリック作成のバリデーション（営業時間外は不可）。重なり検知は現行維持
6. 検証（当日/休業日/枠間隔変更/フィルタ連動）

## 成果物
- 営業時間・枠間隔に沿ったタイムテーブル
- 現在時刻タイムバー
- 「確定予約」強調表示

以上の計画で実装に進めます。ご承認いただければ着手します。