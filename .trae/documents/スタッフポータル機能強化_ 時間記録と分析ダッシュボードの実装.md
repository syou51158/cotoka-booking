# スタッフポータル機能強化プラン

ご要望の「時間の記録」と「分析・履歴機能の復活」を実現し、スタッフが使いやすく、かつ管理者にとっても承認しやすいシステムにします。

## 1. データベースの更新
以下のカラムを追加します。
- **売上詳細テーブル (`sales_transactions`)**:
  - `visit_time` (時間型): 施術開始または会計の時間（ざっくり入力用）
- **スタッフテーブル (`staff`)**:
  - `commission_rate` (数値型): 推定報酬計算用の歩合率（デフォルト40%）

## 2. 日報入力フォームの改修 (`DailySalesForm`)
- **時間入力欄の追加**:
  - メニュー名などの入力欄の横に、「時間」の入力欄を追加します。
  - **UXの工夫**: 初期値として自動的に「現在の時刻」が入るようにします。そのままでも登録でき、必要であれば修正もできるため、スタッフの入力負担は最小限です。

## 3. スタッフダッシュボードの新設 (`StaffDashboard`)
スタッフポータルの新しいタブとして「**実績・分析**」を追加します。以前あったグラフ機能などをより見やすく復活させます。

### 表示内容:
1.  **KPIカード**:
    - **今月の売上合計**: 確定した売上の総額
    - **推定報酬額**: 売上 × 歩合率（例: 40%）で計算した見込み額
    - **総客数**: 接客したお客様の数
2.  **売上推移グラフ**:
    - 日ごとの売上を棒グラフで可視化し、調子の波を一目で確認できるようにします。
3.  **過去の履歴一覧**:
    - 過去に提出・承認された日報をリスト表示し、いつでも振り返れるようにします。

## 実行手順
1.  データベースにカラムを追加
2.  APIを更新し、時間データの保存と集計データの取得を可能にする
3.  フロントエンド（入力フォームとダッシュボード画面）の実装

このプランで進めてよろしいでしょうか？