## 目的
顧客向け（フロント）と管理者向け（/admin）の現状を俯瞰し、主要フローが動作しているかをローカル環境で検証します。必要に応じて不具合修正・設定調整を行います。

## 現状要約
- フレームワーク: Next.js App Router（`src/app`）
- 開発ポート: `3000`（規約に準拠）。ベースURLは `http://localhost:3000`
- 顧客向け主要ページ:
  - トップ: `src/app/[locale]/page.tsx`
  - 予約一覧: `src/app/[locale]/booking/page.tsx`
  - 詳細/選択/確定: `src/app/[locale]/booking/[serviceId]/...`
- 管理向け主要ページ:
  - ログイン: `src/app/admin/(auth)/login/page.tsx`
  - 保護レイアウト: `src/app/admin/(protected)/layout.tsx`（`requireAdmin()`でガード）
  - 管理ダッシュボード等: `/admin`、`/admin/services`、`/admin/shifts`、`/admin/schedule` など
- API群: 顧客公開系（`/api/services` 等）、管理系（`/api/admin/*`）、Stripe、メール、ヘルスチェック（`/api/health/*`）が揃っています
- 認証: 管理者は `ADMIN_PASSCODE` をSHA256でCookie化。APIレイヤは `verifyAdmin(request)` により保護
- 環境変数: Supabase/Stripe/SMTPほか主要キーが `.env.local` に設定済み（値は表示省略）

## 検証ステップ
1. サーバー確認
   - 既存の開発サーバー（ポート`3000`）が動作中かログを確認
   - ベースURL: `http://localhost:3000`
2. 顧客向けUI動作確認
   - `http://localhost:3000/ja` でトップ表示（メニュー・価格のフォールバック/取得確認）
   - `http://localhost:3000/ja/booking` → 任意メニュー → 選択/確定まで画面遷移を確認
3. 管理向けUI動作確認
   - `http://localhost:3000/admin/login` でログイン画面表示
   - `.env.local` の `ADMIN_PASSCODE` でログイン → `/admin` ダッシュボード表示
   - ナビゲーション（予約台帳/メニュー管理/シフト管理/営業設定/Opsチェック）を一通り開く
4. API/ヘルスチェック
   - `http://localhost:3000/api/health/env`（環境変数の読み取り）
   - `http://localhost:3000/api/health/db`（DB接続）
   - `http://localhost:3000/api/health/email`（メール設定）
5. Stripe/メール送信の動作（必要時）
   - テスト決済フロー（`/api/dev/mock/*`のモック有効設定時）
   - 確認メールのプレビュー/送信（開発向けUIがある場合は併用）

## 期待結果
- 主要ページが表示・遷移でき、管理者ログイン後に保護ページへアクセス可能
- ヘルスチェックが成功（DB/メール設定）し、必要に応じてStripeのテストフローも通る

## 次アクション
- 上記検証を実行し、失敗箇所があればログ・設定を確認して修正
- `.env.local` の重複キー（例: `SITE_URL`）など気になる点を整理（必要なら提案・修正）

この計画で進めてもよろしいですか？